<!--
  ~ Copyright 2018, TeamDev Ltd. All rights reserved.
  ~
  ~ Redistribution and use in source and/or binary forms, with or without
  ~ modification, must retain the above copyright notice and the following
  ~ disclaimer.
  ~
  ~ THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  ~ "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
  ~ LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
  ~ A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
  ~ OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
  ~ SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  ~ LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  ~ DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
  ~ THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  ~ (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  ~ OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  -->
<link rel="import" href="../../../bower_components/polymer/polymer-element.html">

<link rel="import" href="../shell/redux-store.html">
<link rel="import" href="./admin-vendor-dialog.html">
<link rel="import" href="../shell/redux-store.html">

<dom-module id="meal-order-dialog-container">
    <template>
    </template>
    <script>
        {
            /**
             * Dialog container.
             *
             * @customElement
             * @polymer
             * @appliesMixin MealOrderApp.ReduxMixin
             */
            class MealOrderDialogContainer extends MealOrderAdminApp.ReduxMixin(Polymer.Element) {
                static get is() {
                    return 'meal-order-dialog-container';
                }

                static get properties() {
                    return {
                        /**
                         * Current dialog.
                         */
                        dialog: {
                            type: Object,
                            statePath: 'currentDialog'
                        }
                    }
                }

                static get observers() {
                    return [
                        '_dialogChanged(dialog)'
                    ];
                }

                _dialogChanged() {
                    if (this.dialog && this.dialog.tagName) {
                        const element = document.createElement(this.dialog.tagName);
                        element.inputData = this.dialog.inputData || {};
                        element.mode = this.dialog.mode;
                        const manager = this.shadowRoot.appendChild(element);
                        const dialog = manager.shadowRoot.querySelector('#dialog');
                        dialog.open();
                    }
                }
            }

            window.customElements.define(MealOrderDialogContainer.is, MealOrderDialogContainer);
        }
    </script>
</dom-module>
